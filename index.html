<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th·ªã Tr·∫•n eSchool - B·∫£n N√¢ng C·∫•p</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/function-plot/dist/function-plot.js"></script>
</head>
<body>

    <div id="auth-overlay" class="overlay">
        <div class="auth-box">
            <h2 style="color: #4CAF50;">üîê C·ªïng v√†o Th·ªã Tr·∫•n</h2>
            
            <div class="auth-tabs">
                <button onclick="switchAuthMode('login')" id="tab-login" class="active">ƒêƒÉng Nh·∫≠p</button>
                <button onclick="switchAuthMode('register')" id="tab-register">ƒêƒÉng K√Ω</button>
            </div>

            <div id="form-login">
                <input type="text" id="login-username" placeholder="T√™n ƒëƒÉng nh·∫≠p">
                <input type="password" id="login-password" placeholder="M·∫≠t kh·∫©u">
                <button onclick="handleLogin()" class="btn-submit">V√†o Th·ªã Tr·∫•n</button>
            </div>

            <div id="form-register" class="hidden">
                <p>B·∫°n l√† ai?</p>
                <div class="role-select">
                    <label><input type="radio" name="reg-role" value="student" checked onclick="toggleEmailField(false)"> üßë‚Äçüéì H·ªçc sinh</label>
                    <label><input type="radio" name="reg-role" value="teacher" onclick="toggleEmailField(true)"> üë©‚Äçüè´ Gi√°o vi√™n</label>
                </div>
                <input type="text" id="reg-username" placeholder="T√™n ƒëƒÉng nh·∫≠p m·ªõi">
                <input type="password" id="reg-password" placeholder="M·∫≠t kh·∫©u m·ªõi">
                <input type="email" id="reg-email" placeholder="Email (B·∫Øt bu·ªôc cho GV)" class="hidden">
                <button onclick="handleRegister()" class="btn-submit" style="background: #FF9800;">T·∫°o T√†i Kho·∫£n</button>
            </div>
            <p id="auth-msg"></p>
        </div>
    </div>

    <div id="app-container" class="hidden">
        <header>
            <div class="logo">üèòÔ∏è Th·ªã Tr·∫•n eSchool</div>
            <div class="user-panel">
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" id="user-avatar" alt="Avatar">
                <div class="user-details">
                    <span id="display-name">Guest</span>
                    <span id="user-badge" class="badge">Role</span>
                </div>
                <button onclick="logout()" class="btn-logout"><i class="fas fa-sign-out-alt"></i></button>
            </div>
        </header>

        <main id="town-map">
            <h1 class="map-title">B·∫£n ƒê·ªì Th·ªã Tr·∫•n</h1>
            <div class="map-grid">
                <div class="zone math-town" onclick="enterZone('math')">
                    <i class="fas fa-calculator"></i> <h3>Math Town</h3> <p>Khu To√°n H·ªçc</p>
                </div>
                <div class="zone lit-house" onclick="enterZone('literature')">
                    <i class="fas fa-feather-alt"></i> <h3>Literature House</h3> <p>Khu VƒÉn H·ªçc</p>
                </div>
                <div class="zone english-spot" onclick="enterZone('english')">
                    <i class="fas fa-language"></i> <h3>English Spot</h3> <p>Khu Anh Ng·ªØ</p>
                </div>
                <div class="zone square" onclick="enterZone('square')">
                    <i class="fas fa-comments"></i> <h3>Academic Square</h3> <p>Qu·∫£ng Tr∆∞·ªùng (Chat)</p>
                </div>
            </div>
        </main>

        <section id="zone-content" class="hidden">
            <div class="zone-header">
                <button onclick="goBack()" class="btn-back">‚¨Ö Tr·ªü v·ªÅ</button>
                <h2 id="zone-title">Ti√™u ƒë·ªÅ</h2>
            </div>
            
            <div id="sub-menu" class="sub-menu-bar"></div>

            <div id="workspace" class="workspace-box">
                </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>